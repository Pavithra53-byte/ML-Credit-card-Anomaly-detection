<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credit Card Fraud Detection</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" rel="stylesheet">
    <style>
        body {
            padding-top: 40px;
        }

        .container {
            max-width: 600px;
        }

        h2 {
            text-align: center;
            margin-bottom: 30px;
            font-weight: bold;
        }

        .form-group label {
            font-weight: 500;
        }

        #result {
            display: none;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Page Title -->
        <h2 class="text-primary">
            <i class="material-icons" style="font-size: 40px; vertical-align: middle;">credit_card</i>
            Credit Card Fraud Detection
        </h2>

        <!-- Form Start -->
        <form action="/predict" method="POST">
            <div class="form-group">
                <label for="amt">Transaction Amount (amt)</label>
                <input type="number" step="any" class="form-control" id="amt" name="amt" placeholder="Enter transaction amount" required>
            </div>

            <div class="form-group">
                <label for="city_pop">City Population (city_pop)</label>
                <input type="number" class="form-control" id="city_pop" name="city_pop" placeholder="Enter city population" required>
            </div>

            <div class="form-group">
                <label for="merchant">Merchant Name (merchant)</label>
                <select class="form-control" id="merchant" name="merchant" required>
                    <option value="">Select Merchant</option>
                    <!-- Merchant options -->
                    <option value="fraud_Rippin, Kub and Mann">Rippin, Kub and Mann</option>
                    <option value="fraud_Heller, Gutmann and Zieme">Heller, Gutmann and Zieme</option>
                    <option value="fraud_Lind-Buckridge">Lind-Buckridge</option>
                    <option value="fraud_Kutch, Hermiston and Farrell">Kutch, Hermiston and Farrell</option>
                    <option value="fraud_Keeling-Crist">Keeling-Crist</option>
                    <option value="fraud_Stroman, Hudson and Erdman">Stroman, Hudson and Erdman</option>
                    <option value="fraud_Rowe-Vandervort">Rowe-Vandervort</option>
                    <option value="fraud_Corwin-Collins">Corwin-Collins</option>
                    <option value="fraud_Herzog Ltd">Herzog Ltd</option>
                    <option value="fraud_Schoen, Kuphal and Nitzsche">Schoen, Kuphal and Nitzsche</option>
                    <option value="fraud_Rutherford-Mertz">Rutherford-Mertz</option>
                    <option value="fraud_Kerluke-Abshire">Kerluke-Abshire</option>
                    <option value="fraud_Lockman Ltd">Lockman Ltd</option>
                    <option value="fraud_Kiehn Inc">Kiehn Inc</option>
                    <option value="fraud_Beier-Hyatt">Beier-Hyatt</option>
                    <option value="fraud_Schmidt and Sons">Schmidt and Sons</option>
                    <option value="fraud_Lebsack and Sons">Lebsack and Sons</option>
                    <option value="fraud_Mayert Group">Mayert Group</option>
                    <option value="fraud_Konopelski, Schneider and Hartmann">Konopelski, Schneider and Hartmann</option>
                    <option value="fraud_Schultz, Simonis and Little">Schultz, Simonis and Little</option>
                    <option value="fraud_Bauch-Raynor">Bauch-Raynor</option>
                    <option value="fraud_Harris Inc">Harris Inc</option>
                    <option value="fraud_Kling-Grant">Kling-Grant</option>
                    <option value="fraud_Pacocha-Bauch">Pacocha-Bauch</option>
                    <option value="fraud_Lesch Ltd">Lesch Ltd</option>
                    <option value="fraud_Kunde-Sanford">Kunde-Sanford</option>
                    <option value="fraud_Deckow-O'Conner">Deckow-O'Conner</option>
                    <option value="fraud_Bruen-Yost">Bruen-Yost</option>
                    <option value="fraud_Kunze Inc">Kunze Inc</option>
                    <option value="fraud_Nitzsche, Kessler and Wolff">Nitzsche, Kessler and Wolff</option>
                    <option value="fraud_Kihn, Abernathy and Douglas">Kihn, Abernathy and Douglas</option>
                    <option value="fraud_Torphy-Goyette">Torphy-Goyette</option>
                    <option value="fraud_Balistreri-Nader">Balistreri-Nader</option>
                    <option value="fraud_Bahringer, Schoen and Corkery">Bahringer, Schoen and Corkery</option>
                    <option value="fraud_Hudson-Ratke">Hudson-Ratke</option>
                    <option value="fraud_Heidenreich PLC">Heidenreich PLC</option>
                    <option value="fraud_Halvorson Group">Halvorson Group</option>
                    <option value="fraud_Harber Inc">Harber Inc</option>
                    <option value="fraud_Mosciski, Gislason and Mertz">Mosciski, Gislason and Mertz</option>
                    <option value="fraud_Christiansen, Goyette and Schamberger">Christiansen, Goyette and Schamberger</option>
                    <option value="fraud_Howe Ltd">Howe Ltd</option>
                    <option value="fraud_Ledner-Pfannerstill">Ledner-Pfannerstill</option>
                    <option value="fraud_Koepp-Witting">Koepp-Witting</option>
                    <option value="fraud_Doyle Ltd">Doyle Ltd</option>
                    <option value="fraud_Schaefer, Maggio and Daugherty">Schaefer, Maggio and Daugherty</option>
                </select>
            </div>

            <div class="form-group">
                <label for="category">Transaction Category (category)</label>
                <select class="form-control" id="category" name="category" required>
                    <option value="">Select Category</option>
                    <!-- Category options -->
                    <option value="misc_net">Miscellaneous Net</option>
                    <option value="grocery_pos">Grocery POS</option>
                    <option value="entertainment">Entertainment</option>
                    <option value="gas_transport">Gas and Transport</option>
                    <option value="misc_pos">Miscellaneous POS</option>
                    <option value="grocery_net">Grocery Net</option>
                    <option value="shopping_net">Shopping Net</option>
                    <option value="shopping_pos">Shopping POS</option>
                    <option value="food_dining">Food and Dining</option>
                    <option value="personal_care">Personal Care</option>
                    <option value="health_fitness">Health and Fitness</option>
                    <option value="travel">Travel</option>
                    <option value="kids_pets">Kids and Pets</option>
                    <option value="home">Home</option>
                </select>
            </div>

            <div class="form-group">
                <label for="unix_time">Transaction Time (Unix Time)</label>
                <input type="number" class="form-control" id="unix_time" name="unix_time" placeholder="Enter Unix timestamp" required>
            </div>

            <button type="submit" class="btn btn-primary btn-block">
                <i class="material-icons">search</i> Check for Fraud
            </button>
        </form>

        <!-- Result section -->
        <div id="result" class="alert alert-info text-center" role="alert">
        </div>
    </div>

    <!-- JQuery and Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- MDB JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js"></script>

    <script>
        $('form').on('submit', function (event) {
            event.preventDefault();
            var formData = $(this).serialize();
            $.post('/predict', formData, function (data) {
                var resultText = data.is_fraud === 1 ? 'Fraudulent Transaction Detected' : 'Normal Transaction';
                $('#result').text(resultText).show();
            }).fail(function () {
                $('#result').text('An error occurred. Please try again.').show();
            });
        });
    </script>
</body>

</html>
